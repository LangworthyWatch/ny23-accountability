{{/* Fact-check card partial */}}
{{/* Usage: {{ partial "fact-check-card.html" . }} */}}

{{ $verdictClass := "" }}
{{ with .Params.verdict }}
  {{ $v := . | lower }}
  {{ if or (eq $v "false") (hasPrefix $v "false") }}
    {{ $verdictClass = "false" }}
  {{ else if or (eq $v "misleading") (hasPrefix $v "misleading") (hasPrefix $v "mostly false") }}
    {{ $verdictClass = "misleading" }}
  {{ else if or (eq $v "true") (hasPrefix $v "true") (hasPrefix $v "mostly true") }}
    {{ $verdictClass = "true" }}
  {{ else if or (eq $v "deflection") (eq $v "non-responsive") }}
    {{ $verdictClass = "deflection" }}
  {{ else }}
    {{ $verdictClass = "unverified" }}
  {{ end }}
{{ end }}

<a href="{{ .Permalink }}" class="card-link">
  <article class="card fact-check-card" data-verdict="{{ $verdictClass }}">
    <h3 class="card-title">{{ .Title }}</h3>

    <div class="card-meta">
      <time datetime="{{ .Date.Format "2006-01-02" }}">
        {{ .Date.Format "January 2, 2006" }}
      </time>
      {{ with .Params.topic }}
      <span>&middot; {{ . }}</span>
      {{ end }}
    </div>

    {{ with .Params.summary }}
    <p class="card-summary">{{ . }}</p>
    {{ else }}
    {{ with .Summary }}
    <p class="card-summary">{{ . | truncate 150 }}</p>
    {{ end }}
    {{ end }}

    <div class="card-footer">
      {{ with .Params.verdict }}
      {{ partial "verdict-badge.html" . }}
      {{ end }}
    </div>
  </article>
</a>
